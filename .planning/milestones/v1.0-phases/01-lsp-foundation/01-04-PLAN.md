---
phase: 01-lsp-foundation
plan: 04
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - documentation/tutorial/03-project-setup.md
autonomous: true

must_haves:
  truths:
    - "Reader can create F# LSP server project following the tutorial"
    - "Reader understands the project structure"
    - "Reader knows how to reference FunLang submodule"
  artifacts:
    - path: "documentation/tutorial/03-project-setup.md"
      provides: "F# project setup tutorial in Korean"
      contains: "dotnet new"
      min_lines: 80
  key_links: []
---

<objective>
Write the F# project setup tutorial explaining how to create the LSP server project structure with all dependencies.

Purpose: Provides step-by-step guidance for readers to recreate the project from scratch.
Output: Tutorial document with commands, file structures, and explanations.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-lsp-foundation/01-RESEARCH.md
@.planning/phases/01-lsp-foundation/01-01-SUMMARY.md
@documentation/tutorial/01-lsp-concepts.md
@documentation/tutorial/02-library-choice.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Write Project Setup Tutorial (TUT-03)</name>
  <files>documentation/tutorial/03-project-setup.md</files>
  <action>
Write `03-project-setup.md` in Korean covering:

1. **사전 요구사항** (Prerequisites)
   - .NET 10 SDK 설치
   - VS Code 설치
   - Git 설치 (서브모듈용)

2. **프로젝트 구조** (Project Structure)
   ```
   LangLSP/
   ├── src/
   │   ├── LangLSP.Server/      # F# LSP 서버
   │   │   ├── Protocol.fs      # LSP 타입 변환
   │   │   ├── DocumentSync.fs  # 문서 동기화
   │   │   ├── Diagnostics.fs   # 진단 발행
   │   │   ├── Server.fs        # 서버 초기화
   │   │   └── Program.fs       # 진입점
   │   └── LangLSP.Tests/       # 테스트
   ├── client/                   # VS Code 확장
   ├── LangTutorial/            # FunLang 서브모듈
   └── documentation/tutorial/           # 이 튜토리얼
   ```

3. **F# 프로젝트 생성** (Creating F# Project)
   ```bash
   # 솔루션 생성
   dotnet new sln -n LangLSP

   # 서버 프로젝트 생성
   mkdir -p src/LangLSP.Server
   cd src/LangLSP.Server
   dotnet new console -lang F# -n LangLSP.Server

   # 솔루션에 추가
   cd ../..
   dotnet sln add src/LangLSP.Server/LangLSP.Server.fsproj
   ```

4. **NuGet 패키지 설치** (Installing NuGet Packages)
   ```bash
   cd src/LangLSP.Server
   dotnet add package Ionide.LanguageServerProtocol --version 0.7.0
   dotnet add package Serilog
   dotnet add package Serilog.Sinks.File
   ```

   각 패키지 역할 설명:
   - Ionide.LanguageServerProtocol: LSP 프로토콜 구현
   - Serilog: 구조화된 로깅 (디버깅용)

5. **FunLang 서브모듈 연결** (Linking FunLang Submodule)
   ```bash
   # 서브모듈 추가 (이미 존재하는 경우)
   git submodule add https://github.com/example/LangTutorial.git

   # 프로젝트 참조 추가
   dotnet add src/LangLSP.Server/LangLSP.Server.fsproj \
       reference LangTutorial/FunLang/FunLang.fsproj
   ```

   왜 서브모듈인가:
   - FunLang Lexer, Parser, TypeChecker 재사용
   - Ast.fs의 Span 타입 (소스 위치)
   - Diagnostic.fs의 에러 변환 함수

6. **프로젝트 파일 구성** (.fsproj Configuration)
   F# 컴파일 순서의 중요성 설명:
   - F#은 파일 순서에 의존 (순방향 참조 없음)
   - Protocol.fs -> DocumentSync.fs -> Server.fs -> Program.fs

   ```xml
   <ItemGroup>
     <Compile Include="Protocol.fs" />
     <Compile Include="DocumentSync.fs" />
     <Compile Include="Server.fs" />
     <Compile Include="Program.fs" />
   </ItemGroup>
   ```

7. **테스트 프로젝트 설정** (Test Project Setup)
   ```bash
   mkdir -p src/LangLSP.Tests
   cd src/LangLSP.Tests
   dotnet new console -lang F# -n LangLSP.Tests
   dotnet add package Expecto --version 10.2.3
   dotnet add package Expecto.FsCheck --version 10.2.3
   dotnet add reference ../LangLSP.Server/LangLSP.Server.fsproj
   ```

8. **빌드 및 실행 확인** (Build and Run Verification)
   ```bash
   dotnet build
   dotnet run --project src/LangLSP.Server
   # Ctrl+C로 종료 (stdin 대기 중)
   ```

Include actual code snippets from the implemented project files to show what each file should contain initially.
Target length: 120-180 lines.
  </action>
  <verify>
File exists at `documentation/tutorial/03-project-setup.md` with all 8 sections, Korean text, bash commands, and at least 80 lines
  </verify>
  <done>
Tutorial provides complete project setup instructions that a reader can follow to create the LSP server project
  </done>
</task>

</tasks>

<verification>
1. `documentation/tutorial/03-project-setup.md` exists with all sections
2. All bash commands are accurate and copy-pasteable
3. File explains F# compile order requirement
4. Includes explanation of FunLang submodule integration
</verification>

<success_criteria>
- Reader can follow tutorial to create project from scratch
- All commands are correct for .NET 10
- Explains why each dependency is needed
- Covers both server and test project setup
</success_criteria>

<output>
After completion, create `.planning/phases/01-lsp-foundation/01-04-SUMMARY.md`
</output>
