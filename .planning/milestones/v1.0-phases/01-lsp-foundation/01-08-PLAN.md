---
phase: 01-lsp-foundation
plan: 08
type: execute
wave: 5
depends_on: ["01-06"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "User opens .fun file in VS Code and LSP server starts"
    - "User sees red squiggles under syntax errors"
    - "User sees red squiggles under type errors"
    - "Diagnostics update as user types (without saving)"
  artifacts: []
  key_links: []
---

<objective>
Verify the complete Phase 1 integration works end-to-end in VS Code.

Purpose: Ensures all components work together before marking the phase complete.
Output: Human verification that the core LSP features work as expected.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-lsp-foundation/01-06-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build and Prepare for Testing</name>
  <files></files>
  <action>
Ensure all components are built and ready:

1. Build F# server:
   ```bash
   dotnet build src/LangLSP.Server/LangLSP.Server.fsproj
   ```

2. Build VS Code extension:
   ```bash
   cd client && npm install && npm run compile
   ```

3. Run all unit tests:
   ```bash
   dotnet test src/LangLSP.Tests/LangLSP.Tests.fsproj
   ```

4. Verify all tests pass before proceeding to manual verification.
  </action>
  <verify>
All builds succeed and all unit tests pass
  </verify>
  <done>
Server, extension, and tests all build and pass
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete LSP integration: F# server with Document Sync and Diagnostics, VS Code extension client
  </what-built>
  <how-to-verify>
1. Open VS Code in the LangLSP project directory
2. Press F5 to launch Extension Development Host (from client folder)
   - Or: Run > Start Debugging with the extension launch config
3. In the Extension Development Host window:
   a. Create or open a .fun file (e.g., test.fun)
   b. Type valid FunLang code: `let x = 1 in x + 2`
      - Expected: No red squiggles
   c. Type syntax error: `let x = in x`
      - Expected: Red squiggles appear, error message in Problems panel
   d. Type type error: `let x = 1 in x + true`
      - Expected: Red squiggles appear, type mismatch message in Problems panel
   e. Modify the code (don't save)
      - Expected: Diagnostics update immediately as you type
   f. Close the .fun file
      - Expected: Errors disappear from Problems panel

4. Check Output panel (select "FunLang Language Server" from dropdown)
   - Server should show communication logs
  </how-to-verify>
  <resume-signal>
Type "approved" if all verification steps pass.
If issues found, describe what's not working.
  </resume-signal>
</task>

</tasks>

<verification>
- All automated tests pass (unit tests)
- Human verification confirms end-to-end functionality
- Diagnostics appear in real-time
- Problems panel updates correctly
</verification>

<success_criteria>
- LSP server starts when .fun file is opened
- Syntax errors show red squiggles with error messages
- Type errors show red squiggles with type mismatch details
- Diagnostics update without saving (real-time)
- Diagnostics clear when file is closed
</success_criteria>

<output>
After completion, create `.planning/phases/01-lsp-foundation/01-08-SUMMARY.md`
</output>
