<!DOCTYPE HTML>
<html lang="ko" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>VS Code Extension 패키징 - FunLang LSP 튜토리얼</title>


        <!-- Custom HTML head -->

        <meta name="description" content="F#으로 만드는 Language Server — LSP 입문자를 위한 단계별 한국어 튜토리얼">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon-de23e50b.svg">
        <link rel="shortcut icon" href="favicon-8114d1fc.png">
        <link rel="stylesheet" href="css/variables-8adf115d.css">
        <link rel="stylesheet" href="css/general-2459343d.css">
        <link rel="stylesheet" href="css/chrome-ae938929.css">
        <link rel="stylesheet" href="css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex-29f6f4ed.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc-b67c2577.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">FunLang LSP 튜토리얼</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h1 id="vs-code-extension-패키징"><a class="header" href="#vs-code-extension-패키징">VS Code Extension 패키징</a></h1>
<p>지금까지 우리는 완전한 Language Server를 만들어왔습니다. 진단(Diagnostics), 호버(Hover), 자동 완성(Completion), 정의로 이동(Go to Definition), 참조 찾기(Find References), 이름 바꾸기(Rename), 그리고 코드 액션(Code Actions)까지 모두 구현했습니다.</p>
<p>이제 마지막 단계입니다. 이 강력한 Language Server를 누구나 설치할 수 있는 VS Code Extension으로 패키징하는 방법을 배웁니다. 이 튜토리얼에서는 TextMate 문법을 사용한 구문 강조(Syntax Highlighting), 언어 설정(Language Configuration), 코드 스니펫(Code Snippets), 그리고 VSIX 패키징을 다룹니다.</p>
<h2 id="목차"><a class="header" href="#목차">목차</a></h2>
<ol>
<li><a href="#vs-code-extension-구조">VS Code Extension 구조</a></li>
<li><a href="#textmate-grammar">TextMate Grammar</a></li>
<li><a href="#language-configuration">Language Configuration</a></li>
<li><a href="#코드-스니펫">코드 스니펫</a></li>
<li><a href="#packagejson-contributes-설정">package.json Contributes 설정</a></li>
<li><a href="#extension-진입점-extensionts">Extension 진입점 (extension.ts)</a></li>
<li><a href="#vsix-패키징">VSIX 패키징</a></li>
<li><a href="#로컬-설치-및-테스트">로컬 설치 및 테스트</a></li>
<li><a href="#정리">정리</a></li>
</ol>
<hr>
<h2 id="vs-code-extension-구조"><a class="header" href="#vs-code-extension-구조">VS Code Extension 구조</a></h2>
<p>VS Code Extension은 크게 두 가지 방식으로 기능을 제공합니다:</p>
<ol>
<li><strong>선언적(Declarative)</strong>: JSON 파일로 정의 (문법, 스니펫, 언어 설정)</li>
<li><strong>명령적(Imperative)</strong>: TypeScript 코드로 구현 (LSP 클라이언트 시작)</li>
</ol>
<h3 id="extension의-구조"><a class="header" href="#extension의-구조">Extension의 구조</a></h3>
<p>우리 FunLang Extension의 디렉토리 구조입니다:</p>
<pre><code>client/
├── package.json                    # 확장 매니페스트 (메타데이터 + contributes)
├── language-configuration.json     # 언어 설정 (주석, 괄호 매칭 등)
├── src/extension.ts                # LSP 클라이언트 진입점 (TypeScript)
├── out/extension.js                # 컴파일된 JavaScript
├── syntaxes/                       # 문법 정의 (TextMate)
│   └── funlang.tmLanguage.json
├── snippets/                       # 코드 스니펫
│   └── funlang.json
├── images/                         # 확장 아이콘
│   └── funlang-icon.png
└── server/                         # 패키징 시 LSP 서버 바이너리
    └── LangLSP.Server
</code></pre>
<h3 id="extension-로딩-과정"><a class="header" href="#extension-로딩-과정">Extension 로딩 과정</a></h3>
<p>VS Code가 Extension을 로드하는 과정입니다:</p>
<ol>
<li><strong><code>package.json</code> 읽기</strong>: <code>engines.vscode</code> 버전 체크, <code>contributes</code> 등록</li>
<li><strong>선언적 기능 활성화</strong>: 문법, 스니펫, 언어 설정 즉시 적용</li>
<li><strong>Activation Event 대기</strong>: <code>activationEvents</code>에 정의된 이벤트 발생 시</li>
<li><strong><code>main</code> 진입점 실행</strong>: <code>extension.ts</code>의 <code>activate()</code> 함수 호출</li>
<li><strong>명령적 기능 시작</strong>: LSP 클라이언트 시작, 서버 프로세스 생성</li>
</ol>
<p>VS Code 1.74+에서는 <code>activationEvents</code>를 빈 배열(<code>[]</code>)로 두면, <code>contributes.languages</code>에 등록된 언어의 파일을 열 때 자동으로 활성화됩니다.</p>
<h3 id="packagejson의-핵심-필드"><a class="header" href="#packagejson의-핵심-필드">package.json의 핵심 필드</a></h3>
<pre><code class="language-json">{
  "name": "funlang",              // Extension ID (소문자, 하이픈)
  "displayName": "FunLang",       // 사용자에게 표시되는 이름
  "publisher": "funlang",         // 게시자 ID (마켓플레이스 필요)
  "version": "0.1.0",             // 시맨틱 버전
  "engines": {
    "vscode": "^1.74.0"           // 최소 VS Code 버전
  },
  "activationEvents": [],         // 빈 배열 = 자동 활성화
  "main": "./out/extension.js",   // 진입점 (컴파일된 JS)
  "contributes": { /* ... */ }    // 선언적 기여 사항
}
</code></pre>
<p><strong><code>contributes</code> 필드</strong>가 가장 중요합니다. 여기에 언어, 문법, 스니펫 등을 등록합니다.</p>
<hr>
<h2 id="textmate-grammar"><a class="header" href="#textmate-grammar">TextMate Grammar</a></h2>
<p><strong>TextMate Grammar</strong>는 정규식 기반 토큰화 시스템으로, 구문 강조(Syntax Highlighting)를 제공합니다. VS Code는 TextMate 문법을 사용하여 코드를 색상으로 구분합니다.</p>
<h3 id="textmate-문법의-구조"><a class="header" href="#textmate-문법의-구조">TextMate 문법의 구조</a></h3>
<p>TextMate 문법 파일(<code>funlang.tmLanguage.json</code>)은 다음 구조를 가집니다:</p>
<pre><code class="language-json">{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "FunLang",
  "scopeName": "source.funlang",
  "patterns": [
    { "include": "#comments" },
    { "include": "#strings" },
    { "include": "#keywords" }
  ],
  "repository": {
    "comments": { /* 주석 규칙 */ },
    "strings": { /* 문자열 규칙 */ },
    "keywords": { /* 키워드 규칙 */ }
  }
}
</code></pre>
<ul>
<li><strong><code>scopeName</code></strong>: 이 문법의 고유 식별자 (예: <code>source.funlang</code>)</li>
<li><strong><code>patterns</code></strong>: 최상위 토큰 매칭 규칙 배열 (순서대로 시도)</li>
<li><strong><code>repository</code></strong>: 재사용 가능한 패턴 정의 (이름으로 참조)</li>
</ul>
<h3 id="funlang-토큰-카테고리"><a class="header" href="#funlang-토큰-카테고리">FunLang 토큰 카테고리</a></h3>
<p>FunLang 구문을 다음 카테고리로 나눕니다:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>카테고리</th><th>예시</th><th>Scope 이름</th></tr>
</thead>
<tbody>
<tr><td>주석</td><td><code>// line</code>, <code>(* block *)</code></td><td><code>comment.line</code>, <code>comment.block</code></td></tr>
<tr><td>문자열</td><td><code>"hello\n"</code></td><td><code>string.quoted.double</code></td></tr>
<tr><td>상수</td><td><code>42</code>, <code>true</code>, <code>false</code></td><td><code>constant.numeric</code>, <code>constant.language.boolean</code></td></tr>
<tr><td>키워드</td><td><code>if</code>, <code>let</code>, <code>match</code></td><td><code>keyword.control</code></td></tr>
<tr><td>타입</td><td><code>int</code>, <code>bool</code>, <code>'a</code></td><td><code>support.type</code>, <code>variable.parameter.type</code></td></tr>
<tr><td>연산자</td><td><code>-&gt;</code>, <code>::</code>, <code>+</code></td><td><code>keyword.operator.*</code></td></tr>
<tr><td>와일드카드</td><td><code>_</code></td><td><code>variable.language.wildcard</code></td></tr>
</tbody>
</table>
</div>
<h3 id="주석-패턴"><a class="header" href="#주석-패턴">주석 패턴</a></h3>
<p>FunLang은 두 가지 주석을 지원합니다:</p>
<pre><code class="language-json">"comments": {
  "patterns": [
    {
      "name": "comment.line.double-slash.funlang",
      "match": "//.*$"
    },
    {
      "name": "comment.block.funlang",
      "begin": "\\(\\*",
      "end": "\\*\\)",
      "patterns": [
        { "include": "#block-comment-nested" }
      ]
    }
  ]
}
</code></pre>
<p><strong>중첩 블록 주석 처리</strong>:</p>
<p>FunLang은 <code>(* (* nested *) *)</code>와 같이 중첩된 블록 주석을 지원합니다. 이를 위해 자기 참조 패턴을 사용합니다:</p>
<pre><code class="language-json">"block-comment-nested": {
  "name": "comment.block.nested.funlang",
  "begin": "\\(\\*",
  "end": "\\*\\)",
  "patterns": [
    { "include": "#block-comment-nested" }  // 자기 자신 참조
  ]
}
</code></pre>
<p><strong>주의</strong>: <code>(*</code>와 <code>*)</code>는 정규식 메타 문자이므로 <code>\\(\\*</code>, <code>\\*\\)</code>로 이스케이프해야 합니다.</p>
<h3 id="문자열-패턴"><a class="header" href="#문자열-패턴">문자열 패턴</a></h3>
<p>문자열은 이스케이프 시퀀스를 지원합니다:</p>
<pre><code class="language-json">"strings": {
  "name": "string.quoted.double.funlang",
  "begin": "\"",
  "end": "\"",
  "patterns": [
    {
      "name": "constant.character.escape.funlang",
      "match": "\\\\[nrt\\\\\"']"
    }
  ]
}
</code></pre>
<p><code>\n</code>, <code>\r</code>, <code>\t</code>, <code>\\</code>, <code>\"</code>, <code>\'</code>를 이스케이프로 인식합니다.</p>
<h3 id="상수-패턴"><a class="header" href="#상수-패턴">상수 패턴</a></h3>
<p>숫자와 불린 상수를 매칭합니다:</p>
<pre><code class="language-json">"constants": {
  "patterns": [
    {
      "name": "constant.numeric.integer.funlang",
      "match": "\\b[0-9]+\\b"
    },
    {
      "name": "constant.language.boolean.funlang",
      "match": "\\b(true|false)\\b"
    }
  ]
}
</code></pre>
<p><code>\b</code>는 **단어 경계(word boundary)**입니다. <code>42</code>는 매칭하지만 <code>x42</code>는 매칭하지 않습니다.</p>
<h3 id="키워드-패턴"><a class="header" href="#키워드-패턴">키워드 패턴</a></h3>
<p>FunLang의 예약어입니다:</p>
<pre><code class="language-json">"keywords": {
  "name": "keyword.control.funlang",
  "match": "\\b(if|then|else|match|with|let|in|fun|rec)\\b"
}
</code></pre>
<p><strong>함정: 단어 경계 없이 매칭하면 문제 발생</strong></p>
<pre><code class="language-json">// 잘못된 예
"match": "(let|if)"   // "letter"에서 "let" 매칭, "lift"에서 "if" 매칭

// 올바른 예
"match": "\\b(let|if)\\b"   // "let", "if"만 매칭, "letter"는 매칭 안 됨
</code></pre>
<h3 id="타입-패턴"><a class="header" href="#타입-패턴">타입 패턴</a></h3>
<p>타입 키워드와 타입 변수를 구분합니다:</p>
<pre><code class="language-json">"types": {
  "patterns": [
    {
      "name": "support.type.funlang",
      "match": "\\b(int|bool|string|list)\\b"
    },
    {
      "name": "variable.parameter.type.funlang",
      "match": "'[a-zA-Z][a-zA-Z0-9_]*"
    }
  ]
}
</code></pre>
<ul>
<li><code>int</code>, <code>bool</code>, <code>string</code>, <code>list</code>: 내장 타입 (파란색)</li>
<li><code>'a</code>, <code>'result</code>: 타입 변수 (녹색)</li>
</ul>
<h3 id="연산자-패턴"><a class="header" href="#연산자-패턴">연산자 패턴</a></h3>
<p><strong>중요: 다중 문자 연산자를 먼저 매칭해야 합니다.</strong></p>
<pre><code class="language-json">"operators": {
  "patterns": [
    { "name": "keyword.operator.arrow.funlang", "match": "-&gt;" },
    { "name": "keyword.operator.cons.funlang", "match": "::" },
    { "name": "keyword.operator.comparison.funlang", "match": "&lt;&gt;|&lt;=|&gt;=|&lt;|&gt;" },
    { "name": "keyword.operator.logical.funlang", "match": "&amp;&amp;|\\|\\|" },
    { "name": "keyword.operator.arithmetic.funlang", "match": "[+\\-*/]" },
    { "name": "keyword.operator.assignment.funlang", "match": "=" },
    { "name": "keyword.operator.pipe.funlang", "match": "\\|" }
  ]
}
</code></pre>
<p><strong>함정: 잘못된 순서로 매칭하면 분할 발생</strong></p>
<pre><code>// 잘못된 순서
patterns: ["-", "-&gt;"]

코드: "x -&gt; y"
결과: "-" 매칭, "&gt;" 미매칭 → 색상 깨짐

// 올바른 순서
patterns: ["-&gt;", "-"]

코드: "x -&gt; y"
결과: "-&gt;" 전체 매칭 → 정상 색상
</code></pre>
<p>TextMate는 <code>patterns</code> 배열을 순서대로 시도하므로, <strong>긴 패턴을 먼저 배치</strong>해야 합니다.</p>
<h3 id="와일드카드-패턴"><a class="header" href="#와일드카드-패턴">와일드카드 패턴</a></h3>
<p><code>_</code>는 특별한 식별자입니다:</p>
<pre><code class="language-json">"identifiers": {
  "patterns": [
    {
      "name": "variable.language.wildcard.funlang",
      "match": "\\b_\\b"
    }
  ]
}
</code></pre>
<p>이 패턴은 <code>_</code> 단독일 때만 매칭하고, <code>_x</code>나 <code>x_</code>는 매칭하지 않습니다.</p>
<h3 id="완전한-funlangtmlanguagejson"><a class="header" href="#완전한-funlangtmlanguagejson">완전한 funlang.tmLanguage.json</a></h3>
<pre><code class="language-json">{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "FunLang",
  "scopeName": "source.funlang",
  "patterns": [
    { "include": "#comments" },
    { "include": "#strings" },
    { "include": "#constants" },
    { "include": "#keywords" },
    { "include": "#types" },
    { "include": "#operators" },
    { "include": "#identifiers" }
  ],
  "repository": {
    "comments": {
      "patterns": [
        {
          "name": "comment.line.double-slash.funlang",
          "match": "//.*$"
        },
        {
          "name": "comment.block.funlang",
          "begin": "\\(\\*",
          "end": "\\*\\)",
          "patterns": [
            { "include": "#block-comment-nested" }
          ]
        }
      ]
    },
    "block-comment-nested": {
      "name": "comment.block.nested.funlang",
      "begin": "\\(\\*",
      "end": "\\*\\)",
      "patterns": [
        { "include": "#block-comment-nested" }
      ]
    },
    "strings": {
      "name": "string.quoted.double.funlang",
      "begin": "\"",
      "end": "\"",
      "patterns": [
        {
          "name": "constant.character.escape.funlang",
          "match": "\\\\[nrt\\\\\"']"
        }
      ]
    },
    "constants": {
      "patterns": [
        {
          "name": "constant.numeric.integer.funlang",
          "match": "\\b[0-9]+\\b"
        },
        {
          "name": "constant.language.boolean.funlang",
          "match": "\\b(true|false)\\b"
        }
      ]
    },
    "keywords": {
      "name": "keyword.control.funlang",
      "match": "\\b(if|then|else|match|with|let|in|fun|rec)\\b"
    },
    "types": {
      "patterns": [
        {
          "name": "support.type.funlang",
          "match": "\\b(int|bool|string|list)\\b"
        },
        {
          "name": "variable.parameter.type.funlang",
          "match": "'[a-zA-Z][a-zA-Z0-9_]*"
        }
      ]
    },
    "operators": {
      "patterns": [
        { "name": "keyword.operator.arrow.funlang", "match": "-&gt;" },
        { "name": "keyword.operator.cons.funlang", "match": "::" },
        { "name": "keyword.operator.comparison.funlang", "match": "&lt;&gt;|&lt;=|&gt;=|&lt;|&gt;" },
        { "name": "keyword.operator.logical.funlang", "match": "&amp;&amp;|\\|\\|" },
        { "name": "keyword.operator.arithmetic.funlang", "match": "[+\\-*/]" },
        { "name": "keyword.operator.assignment.funlang", "match": "=" },
        { "name": "keyword.operator.pipe.funlang", "match": "\\|" }
      ]
    },
    "identifiers": {
      "patterns": [
        {
          "name": "variable.language.wildcard.funlang",
          "match": "\\b_\\b"
        }
      ]
    }
  }
}
</code></pre>
<h3 id="textmate-문법-테스트하기"><a class="header" href="#textmate-문법-테스트하기">TextMate 문법 테스트하기</a></h3>
<p>VS Code에서 문법이 제대로 작동하는지 확인하려면:</p>
<ol>
<li><code>.fun</code> 파일 열기</li>
<li>명령 팔레트 (Ctrl+Shift+P)</li>
<li>“Developer: Inspect Editor Tokens and Scopes” 실행</li>
<li>커서를 토큰 위에 놓으면 Scope 이름 표시</li>
</ol>
<p>예시:</p>
<pre><code>Token: -&gt;
Scopes: source.funlang keyword.operator.arrow.funlang
</code></pre>
<hr>
<h2 id="language-configuration"><a class="header" href="#language-configuration">Language Configuration</a></h2>
<p><strong>Language Configuration</strong>은 VS Code의 편집 경험을 제어하는 JSON 파일입니다. 주석 토글, 괄호 매칭, 자동 닫기, 들여쓰기 규칙을 정의합니다.</p>
<h3 id="language-configurationjson의-구조"><a class="header" href="#language-configurationjson의-구조">language-configuration.json의 구조</a></h3>
<pre><code class="language-json">{
  "comments": { /* 주석 토글 */ },
  "brackets": [ /* 괄호 매칭 */ ],
  "autoClosingPairs": [ /* 자동 닫기 */ ],
  "surroundingPairs": [ /* 선택 영역 감싸기 */ ],
  "onEnterRules": [ /* Enter 키 동작 */ ],
  "indentationRules": { /* 들여쓰기 규칙 */ }
}
</code></pre>
<h3 id="주석-토글-comments"><a class="header" href="#주석-토글-comments">주석 토글 (comments)</a></h3>
<p>Ctrl+/ (라인 주석), Ctrl+Shift+A (블록 주석)의 동작을 정의합니다:</p>
<pre><code class="language-json">"comments": {
  "lineComment": "//",
  "blockComment": ["(*", "*)"]
}
</code></pre>
<ul>
<li>Ctrl+/: 선택한 줄 앞에 <code>//</code> 추가 또는 제거</li>
<li>Ctrl+Shift+A: 선택 영역을 <code>(* ... *)</code> 로 감싸거나 해제</li>
</ul>
<h3 id="괄호-매칭-brackets"><a class="header" href="#괄호-매칭-brackets">괄호 매칭 (brackets)</a></h3>
<p><strong>FunLang은 중괄호(<code>{}</code>)를 사용하지 않습니다.</strong> 대괄호와 소괄호만 사용합니다:</p>
<pre><code class="language-json">"brackets": [
  ["[", "]"],
  ["(", ")"]
]
</code></pre>
<p>괄호 중 하나에 커서를 놓으면 짝이 강조 표시됩니다.</p>
<p><strong>주의</strong>: 많은 언어가 <code>{</code>, <code>}</code>를 사용하지만, FunLang은 사용하지 않으므로 추가하지 않습니다.</p>
<h3 id="자동-닫기-autoclosingpairs"><a class="header" href="#자동-닫기-autoclosingpairs">자동 닫기 (autoClosingPairs)</a></h3>
<p>여는 문자를 입력하면 닫는 문자가 자동 삽입됩니다:</p>
<pre><code class="language-json">"autoClosingPairs": [
  { "open": "[", "close": "]" },
  { "open": "(", "close": ")" },
  { "open": "\"", "close": "\"", "notIn": ["string"] },
  { "open": "(*", "close": "*)", "notIn": ["string"] }
]
</code></pre>
<ul>
<li><code>[</code> 입력 → <code>[]</code> 삽입, 커서는 <code>[|]</code> 위치</li>
<li><code>"</code> 입력 → <code>""</code> 삽입, 커서는 <code>"|"</code> 위치</li>
<li><strong><code>notIn: ["string"]</code></strong>: 문자열 안에서는 자동 닫기 비활성화</li>
</ul>
<p><strong>블록 주석 자동 닫기</strong>:</p>
<p><code>(*</code> 입력 시 <code>*)</code> 자동 삽입은 편리한 기능입니다. 사용자가 <code>(</code>를 입력하면 <code>)</code>가 먼저 삽입되고, <code>*</code>를 입력하면 <code>*)</code>가 완성됩니다.</p>
<h3 id="선택-영역-감싸기-surroundingpairs"><a class="header" href="#선택-영역-감싸기-surroundingpairs">선택 영역 감싸기 (surroundingPairs)</a></h3>
<p>텍스트 선택 후 여는 문자를 입력하면 선택 영역을 감쌉니다:</p>
<pre><code class="language-json">"surroundingPairs": [
  ["[", "]"],
  ["(", ")"],
  ["\"", "\""]
]
</code></pre>
<p>예시:</p>
<ol>
<li><code>hello</code> 선택</li>
<li><code>"</code> 입력</li>
<li>결과: <code>"hello"</code></li>
</ol>
<h3 id="enter-키-동작-onenterrules"><a class="header" href="#enter-키-동작-onenterrules">Enter 키 동작 (onEnterRules)</a></h3>
<p>주석에서 Enter를 누르면 다음 줄도 주석으로 시작합니다:</p>
<pre><code class="language-json">"onEnterRules": [
  {
    "beforeText": "^\\s*\\/\\/.*$",
    "action": { "indent": "none", "appendText": "// " }
  }
]
</code></pre>
<p>예시:</p>
<pre><code class="language-funlang">// 이것은 주석입니다&lt;Enter&gt;
// |← 커서 위치, "// " 자동 삽입
</code></pre>
<p><code>beforeText</code> 정규식: <code>^\\s*\\/\\/.*$</code></p>
<ul>
<li><code>^</code>: 줄 시작</li>
<li><code>\\s*</code>: 선택적 공백</li>
<li><code>\\/\\/</code>: <code>//</code> (이스케이프)</li>
<li><code>.*$</code>: 나머지 텍스트</li>
</ul>
<h3 id="들여쓰기-규칙-indentationrules"><a class="header" href="#들여쓰기-규칙-indentationrules">들여쓰기 규칙 (indentationRules)</a></h3>
<p>특정 키워드 뒤에서 들여쓰기를 자동 조정합니다:</p>
<pre><code class="language-json">"indentationRules": {
  "increaseIndentPattern": "\\b(let|if|then|else|match|with|fun)\\b.*$",
  "decreaseIndentPattern": "^\\s*\\b(in|else|with)\\b"
}
</code></pre>
<p><strong><code>increaseIndentPattern</code></strong>: 이 패턴에 매칭되는 줄 다음에 들여쓰기 증가</p>
<pre><code class="language-funlang">let x = 10 in
    |← 자동 들여쓰기
</code></pre>
<p><strong><code>decreaseIndentPattern</code></strong>: 이 패턴으로 시작하는 줄은 들여쓰기 감소</p>
<pre><code class="language-funlang">let x = 10
in  ← 들여쓰기 감소
x + 1
</code></pre>
<h3 id="완전한-language-configurationjson"><a class="header" href="#완전한-language-configurationjson">완전한 language-configuration.json</a></h3>
<pre><code class="language-json">{
  "comments": {
    "lineComment": "//",
    "blockComment": ["(*", "*)"]
  },
  "brackets": [
    ["[", "]"],
    ["(", ")"]
  ],
  "autoClosingPairs": [
    { "open": "[", "close": "]" },
    { "open": "(", "close": ")" },
    { "open": "\"", "close": "\"", "notIn": ["string"] },
    { "open": "(*", "close": "*)", "notIn": ["string"] }
  ],
  "surroundingPairs": [
    ["[", "]"],
    ["(", ")"],
    ["\"", "\""]
  ],
  "autoCloseBefore": ";:.,=}])&gt;` \n\t",
  "onEnterRules": [
    {
      "beforeText": "^\\s*\\/\\/.*$",
      "action": { "indent": "none", "appendText": "// " }
    }
  ],
  "indentationRules": {
    "increaseIndentPattern": "\\b(let|if|then|else|match|with|fun)\\b.*$",
    "decreaseIndentPattern": "^\\s*\\b(in|else|with)\\b"
  }
}
</code></pre>
<p>이 설정으로 FunLang 편집 경험이 크게 향상됩니다.</p>
<hr>
<h2 id="코드-스니펫"><a class="header" href="#코드-스니펫">코드 스니펫</a></h2>
<p><strong>Code Snippets</strong>는 자주 사용하는 코드 패턴을 빠르게 삽입하는 템플릿입니다.</p>
<h3 id="vs-code-스니펫-형식"><a class="header" href="#vs-code-스니펫-형식">VS Code 스니펫 형식</a></h3>
<pre><code class="language-json">{
  "Snippet Name": {
    "prefix": "trigger",
    "body": ["line 1", "line 2"],
    "description": "What this snippet does"
  }
}
</code></pre>
<ul>
<li><strong><code>prefix</code></strong>: 트리거 단어 (사용자가 입력하는 문자열)</li>
<li><strong><code>body</code></strong>: 삽입할 텍스트 (배열, 각 요소는 한 줄)</li>
<li><strong><code>description</code></strong>: 자동 완성 목록에 표시되는 설명</li>
</ul>
<h3 id="tabstop과-placeholder"><a class="header" href="#tabstop과-placeholder">Tabstop과 Placeholder</a></h3>
<p>스니펫은 <strong>tabstop</strong>으로 커서 이동 지점을 정의합니다:</p>
<ul>
<li><code>$1</code>, <code>$2</code>, <code>$3</code>: 탭 키를 누를 때 커서 이동 순서</li>
<li><code>${1:placeholder}</code>: 탭스톱과 기본 텍스트</li>
<li><code>$0</code>: 최종 커서 위치</li>
</ul>
<p>예시:</p>
<pre><code class="language-json">"body": ["let ${1:name} = ${2:value} in", "${0}"]
</code></pre>
<p>동작:</p>
<ol>
<li>스니펫 삽입 → <code>let |name| = value in</code> (커서는 <code>name</code> 위치, 선택됨)</li>
<li>Tab → <code>let x = |value| in</code> (커서는 <code>value</code> 위치)</li>
<li>Tab → <code>let x = 10 in</code> 다음 줄에 커서 (<code>$0</code> 위치)</li>
</ol>
<h3 id="funlang-스니펫들"><a class="header" href="#funlang-스니펫들">FunLang 스니펫들</a></h3>
<h4 id="1-let-binding"><a class="header" href="#1-let-binding">1. Let Binding</a></h4>
<pre><code class="language-json">"Let Binding": {
  "prefix": "let",
  "body": ["let ${1:name} = ${2:value} in", "${0}"],
  "description": "Let binding expression"
}
</code></pre>
<p>트리거: <code>let</code> 입력 후 자동 완성 선택</p>
<p>결과:</p>
<pre><code class="language-funlang">let |name| = value in

</code></pre>
<h4 id="2-recursive-function"><a class="header" href="#2-recursive-function">2. Recursive Function</a></h4>
<pre><code class="language-json">"Recursive Function": {
  "prefix": "letrec",
  "body": ["let rec ${1:name} ${2:param} =", "\t${3:body}", "in", "${0}"],
  "description": "Recursive function definition"
}
</code></pre>
<p>트리거: <code>letrec</code> 입력</p>
<p>결과:</p>
<pre><code class="language-funlang">let rec |name| param =
    body
in

</code></pre>
<h4 id="3-if-then-else"><a class="header" href="#3-if-then-else">3. If-Then-Else</a></h4>
<pre><code class="language-json">"If-Then-Else": {
  "prefix": "if",
  "body": ["if ${1:condition}", "then ${2:consequent}", "else ${3:alternative}"],
  "description": "If-then-else expression"
}
</code></pre>
<p>트리거: <code>if</code> 입력</p>
<p>결과:</p>
<pre><code class="language-funlang">if |condition|
then consequent
else alternative
</code></pre>
<h4 id="4-match-expression"><a class="header" href="#4-match-expression">4. Match Expression</a></h4>
<pre><code class="language-json">"Match Expression": {
  "prefix": "match",
  "body": ["match ${1:expr} with", "| ${2:pattern} -&gt; ${3:body}", "| ${4:_} -&gt; ${0:default}"],
  "description": "Pattern match expression"
}
</code></pre>
<p>트리거: <code>match</code> 입력</p>
<p>결과:</p>
<pre><code class="language-funlang">match |expr| with
| pattern -&gt; body
| _ -&gt; default
</code></pre>
<h4 id="5-lambda"><a class="header" href="#5-lambda">5. Lambda</a></h4>
<pre><code class="language-json">"Lambda": {
  "prefix": "fun",
  "body": ["fun ${1:x} -&gt; ${0:body}"],
  "description": "Lambda expression"
}
</code></pre>
<p>트리거: <code>fun</code> 입력</p>
<p>결과:</p>
<pre><code class="language-funlang">fun |x| -&gt; body
</code></pre>
<h4 id="6-match-list"><a class="header" href="#6-match-list">6. Match List</a></h4>
<pre><code class="language-json">"Match List": {
  "prefix": "matchlist",
  "body": ["match ${1:xs} with", "| [] -&gt; ${2:base}", "| ${3:h} :: ${4:t} -&gt; ${0:recursive}"],
  "description": "Pattern match on list (empty and cons)"
}
</code></pre>
<p>트리거: <code>matchlist</code> 입력</p>
<p>결과:</p>
<pre><code class="language-funlang">match |xs| with
| [] -&gt; base
| h :: t -&gt; recursive
</code></pre>
<h3 id="완전한-snippetsfunlangjson"><a class="header" href="#완전한-snippetsfunlangjson">완전한 snippets/funlang.json</a></h3>
<pre><code class="language-json">{
  "Let Binding": {
    "prefix": "let",
    "body": ["let ${1:name} = ${2:value} in", "${0}"],
    "description": "Let binding expression"
  },
  "Recursive Function": {
    "prefix": "letrec",
    "body": ["let rec ${1:name} ${2:param} =", "\t${3:body}", "in", "${0}"],
    "description": "Recursive function definition"
  },
  "If-Then-Else": {
    "prefix": "if",
    "body": ["if ${1:condition}", "then ${2:consequent}", "else ${3:alternative}"],
    "description": "If-then-else expression"
  },
  "Match Expression": {
    "prefix": "match",
    "body": ["match ${1:expr} with", "| ${2:pattern} -&gt; ${3:body}", "| ${4:_} -&gt; ${0:default}"],
    "description": "Pattern match expression"
  },
  "Lambda": {
    "prefix": "fun",
    "body": ["fun ${1:x} -&gt; ${0:body}"],
    "description": "Lambda expression"
  },
  "Match List": {
    "prefix": "matchlist",
    "body": ["match ${1:xs} with", "| [] -&gt; ${2:base}", "| ${3:h} :: ${4:t} -&gt; ${0:recursive}"],
    "description": "Pattern match on list (empty and cons)"
  }
}
</code></pre>
<h3 id="스니펫-테스트하기"><a class="header" href="#스니펫-테스트하기">스니펫 테스트하기</a></h3>
<ol>
<li><code>.fun</code> 파일에서 <code>let</code> 입력</li>
<li>자동 완성 목록에 “Let Binding” 표시</li>
<li>Enter 또는 Tab으로 선택</li>
<li>Tabstop 사이를 Tab 키로 이동</li>
</ol>
<p><strong>함정: 스니펫에서 <code>$</code>와 <code>}</code> 이스케이프하기</strong></p>
<p>스니펫 본문에서 리터럴 <code>$</code>나 <code>}</code>를 사용하려면 이스케이프해야 합니다:</p>
<pre><code class="language-json">"body": ["Price: \\$${1:amount}"]  // $ → \$
</code></pre>
<hr>
<h2 id="packagejson-contributes-설정"><a class="header" href="#packagejson-contributes-설정">package.json Contributes 설정</a></h2>
<p><strong><code>contributes</code></strong> 필드는 Extension이 VS Code에 제공하는 모든 선언적 기능을 등록하는 곳입니다.</p>
<h3 id="contributes의-주요-필드"><a class="header" href="#contributes의-주요-필드">contributes의 주요 필드</a></h3>
<pre><code class="language-json">"contributes": {
  "languages": [ /* 언어 정의 */ ],
  "grammars": [ /* 문법 등록 */ ],
  "snippets": [ /* 스니펫 등록 */ ]
}
</code></pre>
<h3 id="languages-기여"><a class="header" href="#languages-기여">languages 기여</a></h3>
<p>언어 ID, 확장자, 설정 파일, 아이콘을 정의합니다:</p>
<pre><code class="language-json">"languages": [
  {
    "id": "funlang",
    "aliases": ["FunLang", "funlang"],
    "extensions": [".fun"],
    "configuration": "./language-configuration.json",
    "icon": {
      "light": "./images/funlang-icon.png",
      "dark": "./images/funlang-icon.png"
    }
  }
]
</code></pre>
<ul>
<li><strong><code>id</code></strong>: 언어의 고유 식별자 (다른 곳에서 참조용)</li>
<li><strong><code>aliases</code></strong>: 명령 팔레트에서 표시되는 이름들</li>
<li><strong><code>extensions</code></strong>: 이 언어로 인식할 파일 확장자</li>
<li><strong><code>configuration</code></strong>: Language Configuration 파일 경로</li>
<li><strong><code>icon</code></strong>: 파일 아이콘 (라이트/다크 테마용)</li>
</ul>
<p><code>.fun</code> 파일을 열면 VS Code가 자동으로 <code>funlang</code> 언어로 인식합니다.</p>
<h3 id="grammars-기여"><a class="header" href="#grammars-기여">grammars 기여</a></h3>
<p>TextMate 문법 파일을 등록합니다:</p>
<pre><code class="language-json">"grammars": [
  {
    "language": "funlang",
    "scopeName": "source.funlang",
    "path": "./syntaxes/funlang.tmLanguage.json"
  }
]
</code></pre>
<ul>
<li><strong><code>language</code></strong>: 이 문법이 적용될 언어 ID</li>
<li><strong><code>scopeName</code></strong>: TextMate 문법 파일의 <code>scopeName</code>과 일치해야 함</li>
<li><strong><code>path</code></strong>: 문법 파일 경로</li>
</ul>
<p>이 등록으로 <code>funlang</code> 파일에 구문 강조가 적용됩니다.</p>
<h3 id="snippets-기여"><a class="header" href="#snippets-기여">snippets 기여</a></h3>
<p>코드 스니펫 파일을 등록합니다:</p>
<pre><code class="language-json">"snippets": [
  {
    "language": "funlang",
    "path": "./snippets/funlang.json"
  }
]
</code></pre>
<ul>
<li><strong><code>language</code></strong>: 스니펫이 활성화될 언어 ID</li>
<li><strong><code>path</code></strong>: 스니펫 파일 경로</li>
</ul>
<p><code>funlang</code> 파일에서 <code>let</code>, <code>if</code> 등을 입력하면 스니펫 자동 완성이 나타납니다.</p>
<h3 id="기타-필수-필드들"><a class="header" href="#기타-필수-필드들">기타 필수 필드들</a></h3>
<p>package.json에는 <code>contributes</code> 외에도 필수 필드들이 있습니다:</p>
<pre><code class="language-json">{
  "publisher": "funlang",
  "engines": {
    "vscode": "^1.74.0"
  },
  "icon": "images/funlang-icon.png",
  "activationEvents": []
}
</code></pre>
<ul>
<li><strong><code>publisher</code></strong>: 게시자 ID (VSIX 패키징 시 필수, 마켓플레이스 게시 시 실제 계정 필요)</li>
<li><strong><code>engines.vscode</code></strong>: 최소 VS Code 버전</li>
<li><strong><code>icon</code></strong>: Extension 아이콘 (128x128 PNG 권장)</li>
<li><strong><code>activationEvents</code></strong>: 빈 배열 = <code>contributes.languages</code>에 의한 자동 활성화</li>
</ul>
<h3 id="완전한-packagejson"><a class="header" href="#완전한-packagejson">완전한 package.json</a></h3>
<pre><code class="language-json">{
  "name": "funlang",
  "displayName": "FunLang",
  "description": "FunLang language support with LSP",
  "version": "0.1.0",
  "publisher": "funlang",
  "icon": "images/funlang-icon.png",
  "engines": {
    "vscode": "^1.74.0"
  },
  "categories": [
    "Programming Languages"
  ],
  "activationEvents": [],
  "main": "./out/extension.js",
  "contributes": {
    "languages": [
      {
        "id": "funlang",
        "aliases": [
          "FunLang",
          "funlang"
        ],
        "extensions": [
          ".fun"
        ],
        "configuration": "./language-configuration.json",
        "icon": {
          "light": "./images/funlang-icon.png",
          "dark": "./images/funlang-icon.png"
        }
      }
    ],
    "grammars": [
      {
        "language": "funlang",
        "scopeName": "source.funlang",
        "path": "./syntaxes/funlang.tmLanguage.json"
      }
    ],
    "snippets": [
      {
        "language": "funlang",
        "path": "./snippets/funlang.json"
      }
    ]
  },
  "scripts": {
    "vscode:prepublish": "npm run compile",
    "compile": "tsc -p ./",
    "watch": "tsc -watch -p ./"
  },
  "dependencies": {
    "vscode-languageclient": "^9.0.1"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "@types/vscode": "^1.74.0",
    "@vscode/vsce": "^3.7.1",
    "typescript": "^5.0.0"
  }
}
</code></pre>
<hr>
<h2 id="extension-진입점-extensionts"><a class="header" href="#extension-진입점-extensionts">Extension 진입점 (extension.ts)</a></h2>
<p><strong>extension.ts</strong>는 Extension의 명령적 코드가 실행되는 진입점입니다. 여기서 LSP 클라이언트를 시작하고 서버 프로세스를 관리합니다.</p>
<h3 id="activate-함수"><a class="header" href="#activate-함수">activate 함수</a></h3>
<p>VS Code가 Extension을 활성화할 때 호출하는 함수입니다:</p>
<pre><code class="language-typescript">export function activate(context: ExtensionContext) {
  // 1. 서버 경로 결정
  // 2. ServerOptions 생성
  // 3. LanguageClientOptions 생성
  // 4. LanguageClient 생성 및 시작
}
</code></pre>
<h3 id="서버-모드-감지"><a class="header" href="#서버-모드-감지">서버 모드 감지</a></h3>
<p>개발 중에는 <code>dotnet run</code>으로 서버를 실행하고, 프로덕션에서는 패키징된 바이너리를 실행합니다:</p>
<pre><code class="language-typescript">const serverDir = context.asAbsolutePath(path.join('server'));
let serverOptions: ServerOptions;

if (fs.existsSync(serverDir)) {
  // 프로덕션: 패키징된 바이너리 사용
  const serverPath = path.join(serverDir, 'LangLSP.Server');
  serverOptions = {
    run: { command: serverPath, options: { cwd: serverDir } },
    debug: { command: serverPath, options: { cwd: serverDir } }
  };
} else {
  // 개발: dotnet run 사용
  serverOptions = {
    run: {
      command: 'dotnet',
      args: ['run', '--project', context.asAbsolutePath(
        path.join('..', 'src', 'LangLSP.Server', 'LangLSP.Server.fsproj')
      )],
      options: { cwd: context.asAbsolutePath('..') }
    },
    debug: {
      command: 'dotnet',
      args: ['run', '--project', context.asAbsolutePath(
        path.join('..', 'src', 'LangLSP.Server', 'LangLSP.Server.fsproj')
      )],
      options: { cwd: context.asAbsolutePath('..') }
    }
  };
}
</code></pre>
<p>**<code>fs.existsSync(serverDir)</code>**로 <code>client/server/</code> 디렉토리가 있는지 확인합니다:</p>
<ul>
<li><strong>있으면</strong>: 패키징된 VSIX → <code>server/LangLSP.Server</code> 바이너리 실행</li>
<li><strong>없으면</strong>: 개발 모드 → <code>dotnet run</code> 실행</li>
</ul>
<p>이렇게 하면 개발 중에는 서버 코드를 수정하고 F5로 디버깅할 수 있고, 프로덕션에서는 빠른 바이너리를 사용합니다.</p>
<h3 id="languageclientoptions"><a class="header" href="#languageclientoptions">LanguageClientOptions</a></h3>
<p>클라이언트가 어떤 파일을 관리할지 정의합니다:</p>
<pre><code class="language-typescript">const clientOptions: LanguageClientOptions = {
  documentSelector: [{ scheme: 'file', language: 'funlang' }],
  synchronize: {
    fileEvents: workspace.createFileSystemWatcher('**/*.fun')
  }
};
</code></pre>
<ul>
<li><strong><code>documentSelector</code></strong>: <code>scheme: 'file'</code> (로컬 파일), <code>language: 'funlang'</code> (언어 ID)</li>
<li><strong><code>synchronize.fileEvents</code></strong>: <code>.fun</code> 파일 변경 감지 (생성/삭제/수정 시 서버에 알림)</li>
</ul>
<h3 id="languageclient-생성-및-시작"><a class="header" href="#languageclient-생성-및-시작">LanguageClient 생성 및 시작</a></h3>
<pre><code class="language-typescript">client = new LanguageClient(
  'funlangServer',
  'FunLang Language Server',
  serverOptions,
  clientOptions
);

client.start();
</code></pre>
<ul>
<li>첫 번째 인자: 서버 ID (내부용)</li>
<li>두 번째 인자: 사용자에게 표시되는 이름 (Output 패널에 표시)</li>
<li><code>client.start()</code>: 서버 프로세스 시작, LSP 연결 수립</li>
</ul>
<h3 id="deactivate-함수"><a class="header" href="#deactivate-함수">deactivate 함수</a></h3>
<p>Extension이 비활성화될 때 호출됩니다:</p>
<pre><code class="language-typescript">export function deactivate(): Thenable&lt;void&gt; | undefined {
  if (!client) {
    return undefined;
  }
  return client.stop();
}
</code></pre>
<p><code>client.stop()</code>은 서버 프로세스를 종료하고 리소스를 정리합니다.</p>
<h3 id="완전한-extensionts"><a class="header" href="#완전한-extensionts">완전한 extension.ts</a></h3>
<pre><code class="language-typescript">import * as path from 'path';
import * as fs from 'fs';
import { workspace, ExtensionContext } from 'vscode';
import {
  LanguageClient,
  LanguageClientOptions,
  ServerOptions
} from 'vscode-languageclient/node';

let client: LanguageClient;

export function activate(context: ExtensionContext) {
  const serverDir = context.asAbsolutePath(path.join('server'));
  let serverOptions: ServerOptions;

  if (fs.existsSync(serverDir)) {
    const serverPath = path.join(serverDir, 'LangLSP.Server');
    serverOptions = {
      run: { command: serverPath, options: { cwd: serverDir } },
      debug: { command: serverPath, options: { cwd: serverDir } }
    };
  } else {
    serverOptions = {
      run: {
        command: 'dotnet',
        args: ['run', '--project', context.asAbsolutePath(
          path.join('..', 'src', 'LangLSP.Server', 'LangLSP.Server.fsproj')
        )],
        options: { cwd: context.asAbsolutePath('..') }
      },
      debug: {
        command: 'dotnet',
        args: ['run', '--project', context.asAbsolutePath(
          path.join('..', 'src', 'LangLSP.Server', 'LangLSP.Server.fsproj')
        )],
        options: { cwd: context.asAbsolutePath('..') }
      }
    };
  }

  const clientOptions: LanguageClientOptions = {
    documentSelector: [{ scheme: 'file', language: 'funlang' }],
    synchronize: {
      fileEvents: workspace.createFileSystemWatcher('**/*.fun')
    }
  };

  client = new LanguageClient(
    'funlangServer',
    'FunLang Language Server',
    serverOptions,
    clientOptions
  );

  client.start();
}

export function deactivate(): Thenable&lt;void&gt; | undefined {
  if (!client) {
    return undefined;
  }
  return client.stop();
}
</code></pre>
<p>이 코드는 VS Code가 <code>.fun</code> 파일을 열면 자동으로 Language Server를 시작하고, 모든 LSP 기능(진단, 호버, 자동 완성 등)을 활성화합니다.</p>
<hr>
<h2 id="vsix-패키징"><a class="header" href="#vsix-패키징">VSIX 패키징</a></h2>
<p><strong>VSIX</strong>는 VS Code Extension의 배포 형식입니다. ZIP 파일과 유사하지만 Extension 매니페스트와 메타데이터를 포함합니다.</p>
<h3 id="vsce-도구-설치"><a class="header" href="#vsce-도구-설치">vsce 도구 설치</a></h3>
<p>VS Code Extension Manager인 <code>@vscode/vsce</code>를 설치합니다:</p>
<pre><code class="language-bash">cd client
npm install --save-dev @vscode/vsce
</code></pre>
<h3 id="패키징-3단계-프로세스"><a class="header" href="#패키징-3단계-프로세스">패키징 3단계 프로세스</a></h3>
<p>VSIX를 만들려면 세 단계를 거칩니다:</p>
<h4 id="1단계-f-서버-퍼블리시"><a class="header" href="#1단계-f-서버-퍼블리시">1단계: F# 서버 퍼블리시</a></h4>
<p>Language Server 바이너리를 <code>client/server/</code> 디렉토리에 빌드합니다:</p>
<pre><code class="language-bash">cd ..  # 프로젝트 루트로
dotnet publish src/LangLSP.Server/LangLSP.Server.fsproj \
  -c Release \
  -o client/server \
  --self-contained false
</code></pre>
<p><strong>옵션 설명:</strong></p>
<ul>
<li><code>-c Release</code>: 릴리스 빌드 (최적화 활성화)</li>
<li><code>-o client/server</code>: 출력 디렉토리</li>
<li><code>--self-contained false</code>: .NET 런타임 별도 설치 필요 (VSIX 크기 감소)</li>
</ul>
<p><strong>출력 확인:</strong></p>
<pre><code class="language-bash">ls -lh client/server/
</code></pre>
<pre><code>LangLSP.Server       # 실행 파일 (Linux/Mac)
LangLSP.Server.exe   # 실행 파일 (Windows, 있는 경우)
LangLSP.Server.dll   # 메인 어셈블리
LangLSP.*.dll        # 프로젝트 의존성
FSharp.Core.dll
Ionide.LanguageServerProtocol.dll
...
</code></pre>
<p><strong>self-contained vs framework-dependent:</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>모드</th><th>장점</th><th>단점</th></tr>
</thead>
<tbody>
<tr><td>framework-dependent (<code>false</code>)</td><td>VSIX 크기 작음 (3-5 MB)</td><td>.NET 런타임 필요</td></tr>
<tr><td>self-contained (<code>true</code>)</td><td>런타임 포함, 독립 실행</td><td>VSIX 크기 큼 (50+ MB)</td></tr>
</tbody>
</table>
</div>
<p>우리는 framework-dependent를 선택했습니다. 사용자가 .NET SDK를 이미 설치했다고 가정합니다.</p>
<h4 id="2단계-typescript-컴파일"><a class="header" href="#2단계-typescript-컴파일">2단계: TypeScript 컴파일</a></h4>
<p><code>extension.ts</code>를 JavaScript로 컴파일합니다:</p>
<pre><code class="language-bash">cd client
npm run compile
</code></pre>
<p>이 명령은 <code>tsc -p ./</code>를 실행하여 <code>src/extension.ts</code>를 <code>out/extension.js</code>로 컴파일합니다.</p>
<p><strong>출력 확인:</strong></p>
<pre><code class="language-bash">ls -l out/
</code></pre>
<pre><code>extension.js
extension.js.map
</code></pre>
<h4 id="3단계-vsix-패키징"><a class="header" href="#3단계-vsix-패키징">3단계: VSIX 패키징</a></h4>
<p>vsce로 VSIX 파일을 생성합니다:</p>
<pre><code class="language-bash">npx vsce package --allow-missing-repository
</code></pre>
<p><strong>옵션 설명:</strong></p>
<ul>
<li><code>--allow-missing-repository</code>: Git 리포지토리 없이도 패키징 허용 (개발 중)</li>
</ul>
<p><strong>출력:</strong></p>
<pre><code>Executing prepublish script 'npm run compile'...
INFO  Detected presense of vscode-languageclient. Bundling extension...
INFO  Creating vsix package...
INFO  Extension packaged: /path/to/funlang-0.1.0.vsix (3.6 MB)
</code></pre>
<p><strong>성공!</strong> <code>funlang-0.1.0.vsix</code> 파일이 생성되었습니다.</p>
<h3 id="vscodeignore-설정"><a class="header" href="#vscodeignore-설정">.vscodeignore 설정</a></h3>
<p>VSIX에 포함하지 않을 파일을 지정합니다:</p>
<pre><code>.vscode/**
src/**
node_modules/**
tsconfig.json
test.fun
*.ts
!out/**
!server/**
!syntaxes/**
!snippets/**
!images/**
!language-configuration.json
</code></pre>
<p><strong>규칙:</strong></p>
<ul>
<li><code>**</code>: 제외 (예: <code>src/**</code> → <code>src/</code> 전체 제외)</li>
<li><code>!**</code>: 포함 (예: <code>!out/**</code> → <code>out/</code> 전체 포함)</li>
</ul>
<p><strong>포함되는 것:</strong></p>
<ul>
<li><code>out/</code> (컴파일된 JS)</li>
<li><code>server/</code> (LSP 서버 바이너리)</li>
<li><code>syntaxes/</code>, <code>snippets/</code>, <code>images/</code> (리소스)</li>
<li><code>language-configuration.json</code>, <code>package.json</code></li>
</ul>
<p><strong>제외되는 것:</strong></p>
<ul>
<li><code>src/</code> (TypeScript 소스)</li>
<li><code>node_modules/</code> (npm 의존성, vsce가 필요한 것만 번들링)</li>
<li><code>*.ts</code> (TypeScript 파일)</li>
</ul>
<h3 id="흔한-패키징-에러"><a class="header" href="#흔한-패키징-에러">흔한 패키징 에러</a></h3>
<h4 id="에러-1-missing-publisher-name"><a class="header" href="#에러-1-missing-publisher-name">에러 1: “Missing publisher name”</a></h4>
<pre><code>ERROR  Missing publisher name
</code></pre>
<p><strong>해결:</strong> package.json에 <code>publisher</code> 필드 추가</p>
<pre><code class="language-json">{
  "publisher": "funlang"
}
</code></pre>
<h4 id="에러-2-missing-extension-icon"><a class="header" href="#에러-2-missing-extension-icon">에러 2: “Missing extension icon”</a></h4>
<pre><code>ERROR  Extension icon not found: images/funlang-icon.png
</code></pre>
<p><strong>해결:</strong> 아이콘 파일 생성 또는 <code>icon</code> 필드 제거</p>
<h4 id="에러-3-this-extension-consists-of-x-mb"><a class="header" href="#에러-3-this-extension-consists-of-x-mb">에러 3: “This extension consists of X MB”</a></h4>
<pre><code>WARNING  This extension consists of 52 MB of code. Please consider using .vscodeignore
</code></pre>
<p><strong>원인:</strong> <code>node_modules/</code> 또는 불필요한 파일 포함</p>
<p><strong>해결:</strong> .vscodeignore에 추가</p>
<h4 id="에러-4-serverlanglspserver-not-found"><a class="header" href="#에러-4-serverlanglspserver-not-found">에러 4: “server/LangLSP.Server not found”</a></h4>
<p>VSIX 설치 후 실행 시 서버가 시작되지 않는 경우.</p>
<p><strong>원인:</strong> <code>dotnet publish</code> 미실행 또는 .vscodeignore가 <code>server/</code> 제외</p>
<p><strong>해결:</strong></p>
<ol>
<li><code>dotnet publish</code> 재실행</li>
<li>.vscodeignore에 <code>!server/**</code> 확인</li>
</ol>
<hr>
<h2 id="로컬-설치-및-테스트"><a class="header" href="#로컬-설치-및-테스트">로컬 설치 및 테스트</a></h2>
<p>VSIX 파일을 생성했으면 로컬에 설치하여 모든 기능이 작동하는지 확인합니다.</p>
<h3 id="vsix-설치"><a class="header" href="#vsix-설치">VSIX 설치</a></h3>
<pre><code class="language-bash">code --install-extension funlang-0.1.0.vsix
</code></pre>
<p>출력:</p>
<pre><code>Installing extensions...
Extension 'funlang.funlang' v0.1.0 was successfully installed.
</code></pre>
<h3 id="검증-체크리스트"><a class="header" href="#검증-체크리스트">검증 체크리스트</a></h3>
<h4 id="1-구문-강조-syntax-highlighting"><a class="header" href="#1-구문-강조-syntax-highlighting">1. 구문 강조 (Syntax Highlighting)</a></h4>
<pre><code class="language-bash">echo 'let x = 42 in x + 1' &gt; test.fun
code test.fun
</code></pre>
<p><strong>확인:</strong></p>
<ul>
<li><code>let</code>, <code>in</code>: 키워드 색상 (보라색/파란색)</li>
<li><code>x</code>: 변수 색상</li>
<li><code>42</code>: 숫자 색상</li>
<li><code>+</code>: 연산자 색상</li>
</ul>
<h4 id="2-주석-토글"><a class="header" href="#2-주석-토글">2. 주석 토글</a></h4>
<p>파일에서:</p>
<ul>
<li>Ctrl+/ → <code>//</code> 주석 추가/제거</li>
<li>Ctrl+Shift+A → <code>(* *)</code> 블록 주석</li>
</ul>
<h4 id="3-자동-닫기-auto-closing"><a class="header" href="#3-자동-닫기-auto-closing">3. 자동 닫기 (Auto-closing)</a></h4>
<ul>
<li><code>(</code> 입력 → <code>)</code> 자동 삽입</li>
<li><code>[</code> 입력 → <code>]</code> 자동 삽입</li>
<li><code>"</code> 입력 → <code>"</code> 자동 삽입</li>
<li><code>(*</code> 입력 → <code>*)</code> 자동 삽입</li>
</ul>
<h4 id="4-스니펫-snippets"><a class="header" href="#4-스니펫-snippets">4. 스니펫 (Snippets)</a></h4>
<p><code>test.fun</code>에서:</p>
<ul>
<li><code>let</code> 입력 → Tab → 스니펫 확장</li>
<li><code>if</code> 입력 → Tab → if-then-else 템플릿</li>
</ul>
<h4 id="5-호버-hover"><a class="header" href="#5-호버-hover">5. 호버 (Hover)</a></h4>
<pre><code class="language-funlang">let x = 42 in
let y = x + 1 in
y
</code></pre>
<p>변수 <code>x</code>에 커서 → 호버 정보 표시 (<code>int</code> 타입)</p>
<h4 id="6-자동-완성-completion"><a class="header" href="#6-자동-완성-completion">6. 자동 완성 (Completion)</a></h4>
<pre><code class="language-funlang">let x = 42 in
x&lt;Ctrl+Space&gt;
</code></pre>
<p>자동 완성 목록에 <code>x</code> 표시</p>
<h4 id="7-정의로-이동-go-to-definition"><a class="header" href="#7-정의로-이동-go-to-definition">7. 정의로 이동 (Go to Definition)</a></h4>
<pre><code class="language-funlang">let x = 42 in
x  ← 여기서 F12
</code></pre>
<p>커서가 <code>x = 42</code>로 이동</p>
<h4 id="8-참조-찾기-find-references"><a class="header" href="#8-참조-찾기-find-references">8. 참조 찾기 (Find References)</a></h4>
<pre><code class="language-funlang">let x = 42 in
x  ← 여기서 Shift+F12
</code></pre>
<p>참조 목록 패널에 모든 <code>x</code> 사용 위치 표시</p>
<h4 id="9-이름-바꾸기-rename"><a class="header" href="#9-이름-바꾸기-rename">9. 이름 바꾸기 (Rename)</a></h4>
<pre><code class="language-funlang">let x = 42 in
x  ← 여기서 F2 → "y" 입력 → Enter
</code></pre>
<p>모든 <code>x</code>가 <code>y</code>로 변경</p>
<h4 id="10-코드-액션-code-actions"><a class="header" href="#10-코드-액션-code-actions">10. 코드 액션 (Code Actions)</a></h4>
<pre><code class="language-funlang">let x = 42 in
42  ← 미사용 변수 경고, 전구 아이콘 클릭
</code></pre>
<p>“Prefix ‘x’ with underscore” 액션 표시</p>
<h3 id="output-패널-확인"><a class="header" href="#output-패널-확인">Output 패널 확인</a></h3>
<p>LSP 서버 로그를 확인하려면:</p>
<ol>
<li>View → Output (Ctrl+Shift+U)</li>
<li>드롭다운에서 “FunLang Language Server” 선택</li>
<li>서버 시작 메시지, 요청/응답 로그 확인</li>
</ol>
<p>예시:</p>
<pre><code>[Info] FunLang Language Server started
[Info] Received textDocument/didOpen: test.fun
[Info] Received textDocument/hover at line 1
</code></pre>
<p>문제가 발생하면 이 로그에서 에러 메시지를 찾을 수 있습니다.</p>
<h3 id="설치-제거"><a class="header" href="#설치-제거">설치 제거</a></h3>
<p>테스트 후 Extension을 제거하려면:</p>
<pre><code class="language-bash">code --uninstall-extension funlang.funlang
</code></pre>
<p><strong>주의:</strong> Extension ID는 <code>publisher.name</code> 형식입니다 (<code>funlang.funlang</code>).</p>
<h3 id="디버깅-팁"><a class="header" href="#디버깅-팁">디버깅 팁</a></h3>
<h4 id="extension이-활성화되지-않는-경우"><a class="header" href="#extension이-활성화되지-않는-경우">Extension이 활성화되지 않는 경우</a></h4>
<ol>
<li><strong>activationEvents 확인</strong>: package.json에 빈 배열 <code>[]</code> 또는 적절한 이벤트 정의</li>
<li><strong>언어 ID 일치</strong>: <code>contributes.languages[0].id</code>와 extension.ts의 <code>documentSelector.language</code> 동일해야 함</li>
<li><strong>VS Code 버전</strong>: <code>engines.vscode</code> 버전이 너무 높으면 구버전 VS Code에서 작동 안 함</li>
</ol>
<h4 id="lsp-기능이-작동하지-않는-경우"><a class="header" href="#lsp-기능이-작동하지-않는-경우">LSP 기능이 작동하지 않는 경우</a></h4>
<ol>
<li><strong>서버 실행 확인</strong>: Output 패널에서 “FunLang Language Server” 로그 확인</li>
<li><strong>.NET 런타임</strong>: framework-dependent 빌드는 .NET 런타임 필요 (<code>dotnet --info</code>로 확인)</li>
<li><strong>서버 경로</strong>: extension.ts의 <code>serverPath</code>가 올바른지 확인</li>
<li><strong>VS Code 재시작</strong>: 가끔 Extension 캐시 문제로 재시작 필요</li>
</ol>
<h4 id="구문-강조가-작동하지-않는-경우"><a class="header" href="#구문-강조가-작동하지-않는-경우">구문 강조가 작동하지 않는 경우</a></h4>
<ol>
<li><strong>문법 파일 경로</strong>: package.json의 <code>contributes.grammars[0].path</code> 확인</li>
<li><strong>scopeName 일치</strong>: package.json과 .tmLanguage.json의 <code>scopeName</code> 동일해야 함</li>
<li><strong>토큰 스코프 확인</strong>: “Developer: Inspect Editor Tokens and Scopes” 명령으로 스코프 확인</li>
</ol>
<hr>
<h2 id="정리"><a class="header" href="#정리">정리</a></h2>
<p>축하합니다! 우리는 12개의 튜토리얼을 통해 완전한 Language Server Protocol 구현을 완성했습니다.</p>
<h3 id="전체-여정-되돌아보기"><a class="header" href="#전체-여정-되돌아보기">전체 여정 되돌아보기</a></h3>
<p><strong>Phase 1-4: LSP 기능 구현</strong></p>
<ol>
<li><strong>진단(Diagnostics)</strong>: 타입 오류, 미사용 변수 감지</li>
<li><strong>호버(Hover)</strong>: 타입 정보 표시</li>
<li><strong>자동 완성(Completion)</strong>: 스코프 내 변수와 키워드 제안</li>
<li><strong>정의로 이동(Go to Definition)</strong>: 변수 선언 위치 찾기</li>
<li><strong>참조 찾기(Find References)</strong>: 모든 사용 위치 검색</li>
<li><strong>이름 바꾸기(Rename)</strong>: 모든 참조 동시 변경</li>
<li><strong>코드 액션(Code Actions)</strong>: 자동 수정 제안</li>
</ol>
<p><strong>Phase 5: VS Code Extension 패키징</strong></p>
<ol>
<li><strong>TextMate 문법</strong>: 구문 강조</li>
<li><strong>Language Configuration</strong>: 주석, 괄호, 들여쓰기</li>
<li><strong>코드 스니펫</strong>: 자주 사용하는 패턴 템플릿</li>
<li><strong>VSIX 패키징</strong>: 배포 가능한 Extension</li>
</ol>
<h3 id="구현한-기능-요약"><a class="header" href="#구현한-기능-요약">구현한 기능 요약</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>기능</th><th>프로토콜 메서드</th><th>핵심 구현</th></tr>
</thead>
<tbody>
<tr><td>진단</td><td><code>textDocument/publishDiagnostics</code></td><td><code>Diagnostics.analyze</code></td></tr>
<tr><td>호버</td><td><code>textDocument/hover</code></td><td><code>Hover.getHoverInfo</code></td></tr>
<tr><td>자동 완성</td><td><code>textDocument/completion</code></td><td><code>Completion.getCompletionItems</code></td></tr>
<tr><td>정의로 이동</td><td><code>textDocument/definition</code></td><td><code>Definition.findDefinition</code></td></tr>
<tr><td>참조 찾기</td><td><code>textDocument/references</code></td><td><code>References.findReferences</code></td></tr>
<tr><td>이름 바꾸기</td><td><code>textDocument/rename</code></td><td><code>Rename.renameSymbol</code></td></tr>
<tr><td>코드 액션</td><td><code>textDocument/codeAction</code></td><td><code>CodeActions.getCodeActions</code></td></tr>
</tbody>
</table>
</div>
<h3 id="extension의-구성-요소"><a class="header" href="#extension의-구성-요소">Extension의 구성 요소</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>파일</th><th>역할</th></tr>
</thead>
<tbody>
<tr><td><code>package.json</code></td><td>Extension 매니페스트, contributes 정의</td></tr>
<tr><td><code>extension.ts</code></td><td>LSP 클라이언트 진입점</td></tr>
<tr><td><code>funlang.tmLanguage.json</code></td><td>TextMate 구문 강조 규칙</td></tr>
<tr><td><code>language-configuration.json</code></td><td>편집 경험 설정</td></tr>
<tr><td><code>funlang.json</code> (snippets)</td><td>코드 스니펫 템플릿</td></tr>
<tr><td><code>server/LangLSP.Server</code></td><td>LSP 서버 바이너리</td></tr>
</tbody>
</table>
</div>
<h3 id="다음-단계"><a class="header" href="#다음-단계">다음 단계</a></h3>
<p>이 튜토리얼 시리즈를 완료했지만, LSP는 더 많은 가능성을 제공합니다:</p>
<h4 id="추가-lsp-기능"><a class="header" href="#추가-lsp-기능">추가 LSP 기능</a></h4>
<ol>
<li><strong>Semantic Tokens</strong>: 의미 기반 구문 강조 (TextMate보다 정확)</li>
<li><strong>Inlay Hints</strong>: 코드에 타입 힌트 표시 (<code>x: int</code>)</li>
<li><strong>Document Symbols</strong>: 파일 개요 (Outline 뷰)</li>
<li><strong>Workspace Symbols</strong>: 프로젝트 전체 심볼 검색</li>
<li><strong>Formatting</strong>: 자동 코드 포매팅</li>
<li><strong>Code Lens</strong>: 인라인 정보 표시 (참조 개수 등)</li>
<li><strong>Call Hierarchy</strong>: 함수 호출 관계 탐색</li>
<li><strong>Type Hierarchy</strong>: 타입 계층 구조</li>
</ol>
<h4 id="다중-파일-지원"><a class="header" href="#다중-파일-지원">다중 파일 지원</a></h4>
<p>현재 우리 LSP는 단일 파일만 처리합니다. 다중 파일 프로젝트를 지원하려면:</p>
<ol>
<li><strong>Module 시스템</strong>: <code>import</code>/<code>export</code> 구문 추가</li>
<li><strong>의존성 해석</strong>: 파일 간 참조 추적</li>
<li><strong>프로젝트 전체 타입 체크</strong>: 모든 파일 동시 분석</li>
<li><strong>Workspace Diagnostics</strong>: 프로젝트 전체 진단</li>
</ol>
<h4 id="vs-code-마켓플레이스-게시"><a class="header" href="#vs-code-마켓플레이스-게시">VS Code 마켓플레이스 게시</a></h4>
<p>VSIX를 만들었으니 이제 마켓플레이스에 게시할 수 있습니다:</p>
<ol>
<li><a href="https://marketplace.visualstudio.com/">Visual Studio Marketplace</a> 계정 생성</li>
<li>Personal Access Token 발급</li>
<li><code>vsce publish</code> 명령으로 게시</li>
<li>사용자가 검색하여 설치 가능</li>
</ol>
<p>게시 가이드: https://code.visualstudio.com/api/working-with-extensions/publishing-extension</p>
<h4 id="다른-에디터-지원"><a class="header" href="#다른-에디터-지원">다른 에디터 지원</a></h4>
<p>LSP는 에디터 독립적입니다. 우리 서버를 다른 에디터에서도 사용할 수 있습니다:</p>
<ul>
<li><strong>Neovim</strong>: <code>nvim-lspconfig</code>로 설정</li>
<li><strong>Emacs</strong>: <code>lsp-mode</code> 설정</li>
<li><strong>Sublime Text</strong>: LSP 플러그인 사용</li>
<li><strong>Vim</strong>: vim-lsp 플러그인</li>
</ul>
<h3 id="핵심-교훈"><a class="header" href="#핵심-교훈">핵심 교훈</a></h3>
<p>이 튜토리얼 시리즈에서 배운 핵심 개념들:</p>
<ol>
<li><strong>LSP는 프로토콜</strong>: 언어와 에디터 독립적, JSON-RPC 기반</li>
<li><strong>서버는 무상태(Stateless)가 아님</strong>: 문서를 메모리에 저장하고 관리</li>
<li><strong>위치는 0-based</strong>: 줄과 문자 모두 0부터 시작</li>
<li><strong>Range는 end-exclusive</strong>: <code>[start, end)</code> 형식</li>
<li><strong>AST 탐색이 핵심</strong>: 대부분의 기능이 AST 탐색 기반</li>
<li><strong>타입 체크 통합</strong>: FunLang 타입 체커를 재사용하여 정확한 타입 정보 제공</li>
<li><strong>선언적 vs 명령적</strong>: JSON 설정(문법, 스니펫)과 코드(LSP 클라이언트) 분리</li>
</ol>
<h3 id="마무리"><a class="header" href="#마무리">마무리</a></h3>
<p>FunLang Language Server는 이제 완성되었습니다. 당신은 이제:</p>
<ul>
<li>LSP 프로토콜의 구조와 동작 방식을 이해합니다</li>
<li>F#으로 Language Server를 구현할 수 있습니다</li>
<li>VS Code Extension을 만들고 패키징할 수 있습니다</li>
<li>구문 강조, 스니펫, 언어 설정을 정의할 수 있습니다</li>
</ul>
<p><strong>이 지식을 활용하여 당신만의 언어를 위한 Language Server를 만들어보세요!</strong></p>
<p>LSP 스펙 참조: https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/</p>
<p>F# Compiler Services: https://fsharp.github.io/fsharp-compiler-docs/</p>
<p>Ionide LSP: https://github.com/ionide/LanguageServerProtocol</p>
<hr>
<p><strong>튜토리얼 시리즈 완료 🎉</strong></p>
<p>이 튜토리얼이 도움이 되었기를 바랍니다. 당신의 Language Server 프로젝트에 행운을 빕니다!</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="11-code-actions.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="11-code-actions.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr-ef4e11c1.min.js"></script>
        <script src="mark-09e88c2c.min.js"></script>
        <script src="searcher-c2a407aa.js"></script>

        <script src="clipboard-1626706a.min.js"></script>
        <script src="highlight-abc7f01d.js"></script>
        <script src="book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
